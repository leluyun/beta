
<!-- saved from url=(0077)https://pearlni.github.io/yzblog/testing/backgroundAudio/backgroundAudio.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <title>webview测试音频</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <div style="margin:0 15px;">测试背景音频，退后台音频应该静音</div>
        <h3>video</h3>
        <video width="100%" controls="" playsinline="" src="sample-mp4-file.mp4"></video>
        
        <h3>audio</h3>
        <figure>
            <audio controls="" src="SoundHelix-Song-1.mp3">
                    Your browser does not support the
                    <code>audio</code> element.
            </audio>
        </figure>
        
        <h3>video via api</h3>
        <button id="videoBtn" class="btn btn_primary">play video</button>
        
        <h3>audio via api</h3>
        <button id="audioBtn" class="btn btn_primary">play audio</button>


        <h3>获取当前页面地址</h3>
        <span class="desc">点击弹出当前页面地址</span><br>
        <button class="btn btn_primary" id="logLocation">location.href</button>
        <div id="currentUrl" style="word-break: break-all;"></div>

        <h3>点击地址改变，但不发生跳转，当前地址用location.href校验</h3>
        <button class="btn btn_primary" id="pushState">pushState回原来页面</button>

        
        <script type="text/javascript" src="./background_files/jweixin-1.3.2.js"></script>
        <script>
        
        function playVideo() {
            var video = document.createElement('video')
            video.src = 'https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4'
            video.playsinline = true
            video.constrols = true
            
            video.play()
        }
        
        function playAudio() {
            var audio = new Audio('https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3')
            audio.play()
        }
        
        var videoBtn = document.querySelector('#videoBtn')
        var audioBtn = document.querySelector('#audioBtn')
        
        videoBtn.addEventListener('click', () => {
            console.log('video button clicked')
            playVideo()
        })
        
        audioBtn.addEventListener('click', () => {
            console.log('audio button clicked')
            playAudio()
        })
            
        // WeixinJSBridge.on('onPageStateChange', (res) => {
        //     console.log('res is active', res.active)
        //     alert('res is active: ' + res.active)
        // })

        document.getElementById('pushState').addEventListener('click', function() {
            console.log('pushState')
            history.pushState(null, 'helloworld', "../other/other.html");
            alert('push state complete');
        });

        document.getElementById('logLocation').addEventListener('click', function() {
            console.log(location.href)
            alert('当前页面地址'+ location.href);
            document.getElementById('currentUrl').innerHTML = location.href;
        })
            
        </script>
    
    
    
    
</body></html>